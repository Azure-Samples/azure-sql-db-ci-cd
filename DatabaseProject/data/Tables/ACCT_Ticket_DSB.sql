CREATE TABLE [data].[ACCT_Ticket_DSB] (
    [SourceSystemCode]             NVARCHAR (50)   NOT NULL,
    [SourceSystemEntryRef]         NVARCHAR (200)  NOT NULL,
    [SequenceNumber]               INT             NOT NULL,
    [SourceSystemFile]             NVARCHAR (200)  NULL,
    [SettlementID]                 INT             NULL,
    [PassengerType]                NVARCHAR (50)   NULL,
    [SalesMachineNumber]           INT             NULL,
    [SalesOperationNumber]         INT             NULL,
    [SalesTransactionSerialNumber] INT             NULL,
    [SerialNumber]                 INT             NULL,
    [PriceOrigin]                  NVARCHAR (10)   NULL,
    [SalesDate]                    DATE            NULL,
    [SalesMonth]                   INT             NULL,
    [SalesMonthName]               NVARCHAR (10)   NULL,
    [SalesYear]                    INT             NULL,
    [SalesYearMonth]               NVARCHAR (10)   NULL,
    [TariffDate]                   DATE            NULL,
    [SingleReturnTicket]           INT             NULL,
    [DSBProductGroup]              NVARCHAR (50)   NULL,
    [DSBProductID]                 INT             NULL,
    [DSBProductName]               NVARCHAR (50)   NULL,
    [PassengerClass]               NVARCHAR (10)   NULL,
    [RateSetNumber]                INT             NULL,
    [RateSetCodeTicketOrg]         NVARCHAR (50)   NULL,
    [SalesChannelNumber]           INT             NULL,
    [SalesChannelName]             NVARCHAR (50)   NULL,
    [SalesPointNumber]             INT             NULL,
    [SalesPointName]               NVARCHAR (50)   NULL,
    [SalesTransactionType]         NVARCHAR (50)   NULL,
    [DeliveryMode]                 NVARCHAR (50)   NULL,
    [Amount]                       DECIMAL (10, 2) NULL,
    [CommisionRate]                NVARCHAR (10)   NULL,
    [CommisionAmount]              DECIMAL (10, 2) NULL,
    [SettlementMoviaS]             DECIMAL (10, 2) NULL,
    [SettlementMoviaV]             DECIMAL (10, 2) NULL,
    [BusinessDiscountAmount]       DECIMAL (10, 2) NULL,
    [YouthDiscount]                DECIMAL (10, 2) NULL,
    [DSBShareAmount]               DECIMAL (10, 2) NULL,
    [PaidZoneCount]                INT             NULL,
    [ValidFrom]                    DATE            NULL,
    [ValidTo]                      DATE            NULL,
    [ValidityDays]                 INT             NULL,
    [FormCount]                    INT             NULL,
    [PassengerCount]               DECIMAL (10, 8) NULL,
    [JourneyStartZone]             INT             NULL,
    [JourneyStartZoneName]         NVARCHAR (50)   NULL,
    [JourneyStartRateAreaNumber]   NVARCHAR (50)   NULL,
    [JourneyStartRateAreaName]     NVARCHAR (50)   NULL,
    [JourneyEndZone]               INT             NULL,
    [JourneyEndZoneName]           NVARCHAR (50)   NULL,
    [JourneyEndRateAreaNumber]     NVARCHAR (50)   NULL,
    [JourneyEndRateAreaName]       NVARCHAR (50)   NULL,
    [ValidityZoneList]             NVARCHAR (200)  NULL,
    [StartStopPointId]             NVARCHAR (50)   NULL,
    [StartStopPointName]           NVARCHAR (50)   NULL,
    [EndStopPointId]               NVARCHAR (50)   NULL,
    [EndStopPointName]             NVARCHAR (50)   NULL,
    [CustomerCardNumber]           INT             NULL,
    [TogPlusAmount]                DECIMAL (10, 2) NULL,
    [JourneyStartDSBStationID]     INT             NULL,
    [JourneyStartDSBStationName]   NVARCHAR (50)   NULL,
    [JourneyEndDSBStationID]       INT             NULL,
    [JourneyEndDSBStationName]     NVARCHAR (50)   NULL,
    [CustomerYearOfBirth]          INT             NULL,
    [CustomerGender]               NVARCHAR (10)   NULL,
    [SettlementMoviaH]             DECIMAL (10, 2) NULL,
    [ArrivaShareAmount]            NVARCHAR (50)   NULL,
    [ArrivaDistanceKm]             NVARCHAR (50)   NULL,
    [ØstbanenShareAmount]          NVARCHAR (50)   NULL,
    [ØstbanenDistanceKm]           NVARCHAR (50)   NULL,
    [TogPlusRateArea]              NVARCHAR (50)   NULL,
    [TogPlusStartStopPointId]      NVARCHAR (50)   NULL,
    [TogPlusStartStopName]         NVARCHAR (50)   NULL,
    [UngdomskortRefund]            NVARCHAR (50)   NULL,
    [AmountTicketOrg]              DECIMAL (10, 2) NULL,
    [FareSetCode]                  NVARCHAR (255)  NULL,
    [DSBProductType]               NVARCHAR (200)  NULL,
    [SourceSystemProductRef]       NVARCHAR (200)  NULL,
    [TicketTypeCode]               NVARCHAR (50)   NULL,
    [MediaTypeCode]                NVARCHAR (50)   NULL,
    [SalesChannelCode]             NVARCHAR (50)   NULL,
    [PassengerTypeCode]            NVARCHAR (50)   NULL,
    [Inserted]                     DATETIME2 (0)   NULL,
    [Updated]                      DATETIME2 (0)   NULL,
    [Hash]                         BINARY (50)     NULL,
    [ValidityDaysOrg]              INT             NULL,
    [PassengerCountOrg]            INT             NULL,
    CONSTRAINT [PK_ACCT_Ticket_DSB] PRIMARY KEY CLUSTERED ([SourceSystemCode] ASC, [SourceSystemEntryRef] ASC, [SequenceNumber] ASC)
);


GO

CREATE UNIQUE NONCLUSTERED INDEX [UQ_ACCT_Ticket_DSB_Merge]
    ON [data].[ACCT_Ticket_DSB]([SourceSystemCode] ASC, [SourceSystemEntryRef] ASC, [SequenceNumber] ASC)
    INCLUDE([Hash]);


GO

